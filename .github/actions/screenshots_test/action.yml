name: Screenshots
description: Runs the app and saves window screenshots for inspection.

inputs:
  root_path:
    type: string
    required: true
  screenshots_path:
    type: string
    required: false
    default: /tmp/screenshots

runs:
  using: "composite"
  steps:
  - name: Save screenshots
    shell: bash
    run: |
        QT_QPA_PLATFORM=vnc SHOOP_LOG=Frontend.TestScreenGrabber=debug shoopdaloop -b dummy --test-grab-screens ${{ inputs.screenshots_path }}
  
  - name: Upload screenshots
    uses: actions/upload-artifact@v3
      with:
        name: screenshots
        path: ${{ inputs.screenshots_path }}


